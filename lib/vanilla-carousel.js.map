{"version":3,"sources":["../src/vanilla-carousel.js"],"names":[],"mappings":"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","file":"vanilla-carousel.js","sourcesContent":["const _                   = require('lodash/core');\n_.includes = require('lodash/includes');\nconst ViewportDetectionClass = require('viewport-detection-es6');\n\nconst viewport = new ViewportDetectionClass();\n\nclass CarouselClass{\n  constructor(config = {}, init = true){\n    this.config = _.defaults(config,\n      {itemClass: 'carousel-item'\n      , autoPlay: false\n      , naturalScroll: true}\n    );\n\n    if (init){\n      this._initViewport();\n      this._init();\n    }\n  }\n\n  _init(){\n    this.animating = false;\n    this.eventManager = this._manageListeners();\n    this.itemActive = 0;\n    this.items = [];\n    this._render();\n  }\n\n  _initViewport(){\n    this.device = viewport.getDevice();\n    this.size = viewport.windowSize();\n    viewport.trackSize(this._trackSize.bind(this));\n  }\n\n  _render(){\n    this._setCarouselId();\n    this._getItems();\n    this._setSelectedDefaults();\n  }\n\n  _addDotClickListeners(){\n    _.forEach(this.dots, (dot)=>{\n      dot.addEventListener('click', this._dotClick.bind(this), false);\n    });\n  }\n\n  _addFocusListeners(){\n    this.config.element.addEventListener('mouseenter'\n                                        , this._stopAutoPlay.bind(this)\n                                        , false);\n\n    this.config.element.addEventListener('mouseleave'\n                                        , this._restartTimer.bind(this)\n                                        , false);\n  }\n\n  _addNavigationListener(button, direction){\n    button.addEventListener('click',\n                            this._navigationClick.bind(this, button, direction)\n                            , false);\n  }\n\n  _animateItemFinish(item){\n    this.animating = false;\n\n    item.className = item.className.replace(/(?:^|\\s)animating(?!\\S)/g, '');\n  }\n\n  _animateItemStart(item, fromPosition, toPosition){\n    item.style.left = fromPosition;\n\n    _.delay(()=>{\n      this.animating = true;\n      item.style.left = toPosition;\n      item.className += ' animating';\n    }, 100);\n\n    this.eventManager.addListener(item\n                                 , 'transitionend'\n                                 , this._animateItemFinish.bind(this, item));\n  }\n\n  _checkDataURLs(){\n    let imageContainer, imageMobile, imageTablet, imageDesktop;\n\n    _.forEach(this.items, (item)=>{\n      imageContainer = this._skipTextNodes(item, 'firstChild');\n      imageMobile = imageContainer.getAttribute('data-mobile');\n      imageTablet = imageContainer.getAttribute('data-tablet');\n      imageDesktop = imageContainer.getAttribute('data-desktop');\n\n      /* eslint-disable max-len */\n      if ((!_.isEmpty(imageMobile)) && (!_.isEmpty(imageTablet)) && (!_.isEmpty(imageDesktop))){\n      /* eslint-enable */\n        item.setAttribute('data-urls', 'true');\n        this._setBackgroundImage(imageContainer, this.device);\n      } else {\n        item.setAttribute('data-urls', 'false');\n      }\n    });\n  }\n\n  _createArrowNav(direction, parent){\n    let a, span, svg;\n\n    a = document.createElement('a');\n    span = document.createElement('span');\n\n    a.setAttribute('href', '#');\n\n    span.innerHTML = direction;\n    a.appendChild(span);\n    svg = this._createArrowNavSvg(direction);\n    a.appendChild(svg);\n    this._addNavigationListener(a, direction);\n\n    parent.appendChild(a);\n  }\n\n  _createArrowNavContainer(){\n    let i, li, ul;\n\n    ul = document.createElement('ul');\n    ul.className = 'carousel-arrows-container';\n\n    for (i = 0; i < 2; i++){\n      li = document.createElement('li');\n\n      li.className = i === 0 ? 'previous' : 'next';\n      this._createArrowNav(i === 0 ? 'previous' : 'next', li);\n\n      ul.appendChild(li);\n    }\n\n    this.config.element.appendChild(ul);\n  }\n\n  _createArrowNavSvg(direction){\n    let pathA = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    let pathB = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\n    svg.setAttribute('fill', '#4a4a4a');\n    svg.setAttribute('height', '48');\n    svg.setAttribute('viewBox', '0 0 24 24');\n    svg.setAttribute('width', '48');\n    svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n    if (direction === 'next'){\n      pathA.setAttributeNS(null\n                          , 'd'\n                          , 'M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z');\n      pathB.setAttributeNS(null\n                          , 'd'\n                          , 'M0-.25h24v24H0z');\n    } else {\n      pathA.setAttributeNS(null\n                          , 'd'\n                          /* eslint-disable max-len */\n                          , 'M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z');\n                          /* eslint-enable */\n      pathB.setAttributeNS(null\n                          , 'd'\n                          , 'M0-.5h24v24H0z');\n    }\n\n    pathB.setAttribute('fill', 'none');\n\n    svg.appendChild(pathA);\n    svg.appendChild(pathB);\n\n    return svg;\n  }\n\n  _createDotsNav(){\n    let a, li, span;\n    let ul = this.dotsContainer.getElementsByTagName('ul')[0];\n\n    _.forEach(this.items, ()=>{\n      a = document.createElement('a');\n      li = document.createElement('li');\n      span = document.createElement('span');\n\n      a.setAttribute('href', '#');\n\n      span.className = 'hidden';\n      span.innerHTML = 'view carousel item';\n\n      a.appendChild(span);\n      li.appendChild(a);\n      ul.appendChild(li);\n    });\n\n    this._getDots();\n  }\n\n  _createDotsNavContainer(){\n    let div = document.createElement('div');\n    let ul = document.createElement('ul');\n    this.dotsContainer = document.createElement('div');\n\n    div.className = 'carousel-dots';\n    this.dotsContainer.id = 'carousel-dots-container';\n\n    div.appendChild(ul);\n    this.dotsContainer.appendChild(div);\n    this.config.element.appendChild(this.dotsContainer);\n\n    this._createDotsNav();\n  }\n\n  _dotClick(e){\n    e.preventDefault();\n\n    let index = _.indexOf(this.dots, e.target);\n\n    if (!this.animating){\n      if (this.itemActive !== index){\n        this.itemOut = this.itemActive;\n        this.itemActive = index;\n\n        this._setSelected('next');\n      }\n    }\n  }\n\n  _getDots(){\n    this.dots = this.dotsContainer.getElementsByTagName('a');\n\n    this._addDotClickListeners();\n    this._setDotAriaSelectedDefaults();\n    this._setDotAriaControls();\n    this._setDotClass();\n  }\n\n  _getItems(){\n    /* eslint-disable max-len */\n    this.items = this.config.element.querySelectorAll('.' + this.config.itemClass);\n    /* eslint-enable */\n\n    if (this.items.length > 1){\n      this._createArrowNavContainer();\n      this._createDotsNavContainer();\n    }\n\n    this._checkDataURLs();\n    this._setItemAriaHiddenDefaults();\n    this._setItemId();\n  }\n\n  _manageListeners(){\n    let listenerArray = [];\n\n    return {\n      addListener: (target, event, fn)=>{\n        listenerArray.push({\n          target: target\n          , event: event\n          , fn: fn\n        });\n\n        target.addEventListener(event, fn, false);\n      }\n\n      , removeListeners: ()=>{\n        if (listenerArray.length > 0){\n          _.forEach(listenerArray, (cur)=>{\n            cur.target.removeEventListener(cur.event, cur.fn, false);\n            cur.target.className.replace(/(?:^|\\s)animating(?!\\S)/g, '');\n          });\n\n          listenerArray = [];\n        }\n      }\n    };\n  }\n\n  _navigationClick(button, direction, e){\n    e.preventDefault();\n\n    if (!this.animating){\n      this.itemOut = this.itemActive;\n\n      if (direction === 'next'){\n        this._next();\n      } else {\n        this._previous();\n      }\n    }\n  }\n\n  _next(){\n    if (this.itemActive < this.items.length - 1){\n      this.itemActive++;\n    } else {\n      this.itemActive = 0;\n    }\n\n    this._setSelected('next');\n  }\n\n  _previous(){\n    if (this.itemActive > 0){\n      this.itemActive--;\n    } else {\n      this.itemActive = this.items.length - 1;\n    }\n\n    this._setSelected('previous');\n  }\n\n  _restartTimer(){\n    this._stopAutoPlay();\n\n    this.timer = window.setInterval(this._startAutoPlay.bind(this), 5000);\n  }\n\n  _setBackgroundImage(imageContainer, device){\n    let url = imageContainer.getAttribute('data-' + device);\n\n    imageContainer.style.backgroundImage = 'url(' + url + ')';\n  }\n\n  _setCarouselId(){\n    this.config.element.id = _.uniqueId('carousel-');\n  }\n\n  _setDotAriaControls(){\n    _.forEach(this.dots, (dot, i)=>{\n      dot.setAttribute('aria-controls'\n                       , `${this.config.element.id}-item-${i + 1}`);\n    });\n  }\n\n  _setDotAriaSelected(){\n    _.forEach(this.dots, (dot)=>{\n      if (dot === this.dots[this.itemActive]){\n        dot.setAttribute('aria-selected', 'true');\n      } else {\n        let ariaSelected = dot.getAttribute('aria-selected');\n\n        if (ariaSelected === 'true'){\n          dot.setAttribute('aria-selected', 'false');\n        }\n      }\n    });\n  }\n\n  _setDotAriaSelectedDefaults(){\n    _.forEach(this.dots, (dot)=>{\n      dot.setAttribute('aria-selected'\n                       , dot === this.dots[this.itemActive] ?\n                       'true' : 'false');\n    });\n  }\n\n  _setDotClass(){\n    _.forEach(this.dots, (dot)=>{\n      if (dot === this.dots[this.itemActive]){\n        dot.className += ' active';\n      } else {\n        let className = dot.className;\n\n        if (_.includes(className, 'active')){\n          dot.className = className.replace(/(?:^|\\s)active(?!\\S)/g, '');\n        }\n      }\n    });\n  }\n\n  _setItemAriaHidden(){\n    _.forEach(this.items, (item)=>{\n      if (item === this.items[this.itemActive]){\n        item.setAttribute('aria-hidden', 'false');\n      } else {\n        let ariaHidden = item.getAttribute('aria-hidden');\n\n        if (ariaHidden === 'false'){\n          item.setAttribute('aria-hidden', 'true');\n        }\n      }\n    });\n  }\n\n  _setItemAriaHiddenDefaults(){\n    _.forEach(this.items, (item)=>{\n      item.setAttribute('aria-hidden'\n                        , item === this.items[this.itemActive] ?\n                        'false' : 'true');\n    });\n  }\n\n  _setItemId(){\n    _.forEach(this.items, (item, i)=>{\n      item.id = `${this.config.element.id}-item-${i + 1}`;\n    });\n  }\n\n  _setPosition(direction, position){\n    let inPosition, outPosition;\n\n    if (direction === 'next'){\n      if (this.config.naturalScroll){\n        inPosition = position;\n        outPosition = -position;\n      } else {\n        inPosition = -position;\n        outPosition = position;\n      }\n    } else if (direction === 'previous'){\n      if (this.config.naturalScroll){\n        inPosition = -position;\n        outPosition = position;\n      } else {\n        inPosition = position;\n        outPosition = -position;\n      }\n    }\n\n    return {\n      inPosition: inPosition + 'px'\n      , outPosition: outPosition + 'px'\n    };\n  }\n\n  _setSelected(direction){\n    let position = this._setPosition(direction, this.size.width);\n\n    this.eventManager.removeListeners();\n    this.itemIn = this.itemActive;\n    this._animateItemStart(this.items[this.itemIn], position.inPosition, 0);\n    this._animateItemStart(this.items[this.itemOut], 0, position.outPosition);\n    this._setDotAriaSelected();\n    this._setDotClass();\n    this._setItemAriaHidden();\n  }\n\n  _setSelectedDefaults(){\n    _.forEach(this.items, (item)=>{\n      item.style.left = item === this.items[this.itemActive] ?\n                        0 : this.size.width + 'px';\n    });\n\n    if (this.config.autoPlay && this.items.length > 0){\n      this._addFocusListeners();\n      this._restartTimer();\n    }\n  }\n\n  _skipTextNodes(el, method){\n    let element = el[method];\n\n    while (element !== null && element.nodeType !== 1){\n      element = element.nextSibling;\n    }\n\n    return element;\n  }\n\n  _startAutoPlay(){\n    this.itemOut = this.itemActive;\n\n    if (this.itemActive < this.items.length - 1){\n      this.itemActive++;\n    } else {\n      this.itemActive = 0;\n    }\n\n    this._setSelected('next');\n  }\n\n  _stopAutoPlay(){\n    if (!this.animating && !_.isUndefined(this.timer)){\n      window.clearInterval(this.timer);\n\n      this.timer = undefined;\n    }\n  }\n\n  _trackSize(device, size){\n    let item = this.items[this.itemActive];\n\n    if (this.device !== device){\n      this.device = device;\n\n      if (item.getAttribute('data-urls') === 'true'){\n        let imageContainer = this._skipTextNodes(item, 'firstChild');\n        this._setBackgroundImage(imageContainer, this.device);\n      }\n    }\n\n    this.size = size;\n  }\n}\n\nmodule.exports = CarouselClass;\n"]}